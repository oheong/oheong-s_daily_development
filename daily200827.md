# 200827

블록체인이란?

- 서로 신뢰할 수 없는 환경에서 사람들이 중립적이고 중앙화된 인증기관 없이 신뢰를 보장할 수 있는 기술

- ##### 신뢰를 만드는 기계



기술적 배경

- P2P 네트워크를 이용하여 거래 내역을 분산, 온라인 네트워크 참가자 모두에게 내용을 공개 및 기록
- 새로운 결제가 일어날 때마다 노드들(참가자)이 가진 블록체인을 업데이트, 무결성을 유지하도록 하는 분산형 거래 시스템
- 퍼블릭 vs 프라이빗



블록체인의 핵심 기술

1. P2P 네트워크
2. 암호화
3. 파일 매니저
4. 합의 알고리즘
5. 스마트 컨트랙트



<hr>

### 이더리움

이더리움이란?

- 분산 어플리케이션을 위한 플랫폼
- 분산화된 상태전이 머신
  - 트랜잭션에 기반한 상태전이 (rollback 안됨)
  - 암호화 알고리즘을 활용 -> 무작위로 상태전이가 되는것을 방지
  - 모든 참여자가 동일한 상태 공유
  - 블록은 해당 시점의 이더리움의 상태를 나타냄



이더리움 상태

- 어느 한 시점에 대한 이더의 잔액, 기타 정보를 담고 있는 계정들의 집합
- 모든 이더리움의 참여 노드는 로컬에 상태 정보를 유지함
- stateObject
  - 상태의 수정일 발생한 이더리움 계정을 나타내는 객체
- stateObject를 통해 이더리움의 state databse인 LevelDB에 업데이트



이더리움의 상태 전이

- 블록 채굴로 인한 거래 내역 추가 시 상태 전이 발생



트랜잭션 종류

- (외부) 트랜잭션
- 내부 트랜잭션

트랜잭션

- EOA가 다른 EOA 혹은 CA로 보내는 '서명된 메세지'
- 계정의 상태 변화를 유도하는 일종의 트리거

내부 트랜잭션

- CA가 다른 CA혹은 EOA에게 전달하는 '서명하지 않은 메세지'
- 주로 컨트랙트 함수 호출에 사용
- 블록체인에 별도로 저장되지 않음

트랜잭션 리시트

- 트랜잭션의 실행 결과를 기록
- 검색을 위한 인덱스, 해당 트랜잭션이 포함된 블록의 번호 및 해시 등 저장



블록

- 이더리움 장부에 기록되는 데이터의 기본 단위
- 트랜잭션들의 집합

엉클블록

- 동일한 시점에 채굴된 블록 중 채굴 난이도가 낮아 메인 체인에 연결되지 못한 블록
- 블록 생성 시간이 빠를수록 엉클 블록의 발생확률이 높음 (비트코인 약 10분 이더리움 약 14초)



작업 증명(PoW, Proof of Work)

- Ethash

지분 증명 (Pos, Proof of Stake)

- 검증자가 가진 지분에 비례한 확률로 블록 생성 권한을 획득하고 생성된 블록을 원하는 체인에 연결, 보상 획득
- 전력 소모량, 채굴 중앙화 등으로 PoW의 문제점을 개선





